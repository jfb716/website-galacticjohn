

<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="author" content="John F. Black">
        <meta name="description" content="Test Site for John F. Black">
        <meta name="keywords" content="John, John Black, John F Black, John F. Black, John Francis Black, Test Site, Test, Synacor, Facebook, NBC, NBCUniversal, LocalEdge, Buffalo, New York, New York City, NYC, Grand Island, University at Buffalo, UB, Technical Support, Ad Operations, AdOps, AdTech">
        <title>GalacticJohn - Header Bidding</title>

        <!-- Site Styles -->
        <link rel="stylesheet" href="/resources/css/style.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

        <!-- JavaScript API's -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>



       <!-- Header Bidding -->
       <script>
            $(document).ready(function(){
                $("#timeout").val(PREBID_TIMEOUT);
            });
       </script>

       <!-- Initial Config -->

        <script>
            var PREBID_TIMEOUT = 700;

            if (window.matchMedia("(max-width: 500px)").matches) {
                        console.log("Mobile Ad Units in Play");
                        var adUnits = [{
                        code: 'div-gpt-ad-1',
                        sizes: [[300, 250]],
                        bids: [{
                            bidder: 'audienceNetwork',
                            params: {
                               placementId: '118220978561571_346529649064035',
                               testMode: true,
                               fullwidth: true,
                               native: false
                            }
                        }]
                    }];
                    }
                    else {
                         console.log("Desktop Ad Units in Play");
                          var adUnits = [{
                          code: 'div-gpt-ad-1',
                          sizes: [[300, 250]],
                          bids: [{
                             bidder: 'audienceNetwork',
                             params: {
                                placementId: '118220978561571_309337232783277',
                                testMode: true
                              }
                          }]
                      }];
                    }


            var pbjs = pbjs || {};
            pbjs.que = pbjs.que || [];

          </script>

        <!-- Boilerplate -->

        <script type="text/javascript" src="resources/js/prebid.js" async></script>
          <script>
            var googletag = googletag || {};
            googletag.cmd = googletag.cmd || [];
            googletag.cmd.push(function() {
                googletag.pubads().disableInitialLoad();
            });

            pbjs.bidderSettings = {
                    standard: {
                        adserverTargeting: [
                             {
                         key: "fb_bidid",
                        val: function (bidResponse) {
                            console.log('Bid Response Bid ID: ' + bidResponse.fbBidId);
                            $("#bidId").val(bidResponse.fbBidId);
                            return bidResponse.fbBidId;
                         }
                            },
                            {
                                key: "hb_bidder",
                                val: function (bidResponse) {
                                    console.log('Bid Response Bidder Name: ' + bidResponse.bidderCode);
                                    $("#bidder").val(bidResponse.bidderCode);
                                    return bidResponse.bidderCode;
                                }
                            }, {
                                key: "hb_adid",
                                val: function (bidResponse) {
                                    console.log('Bid Response Ad ID: ' + bidResponse.adId);
                                    $("#adId").val(bidResponse.adId);
                                    return bidResponse.adId;
                                }
                            }, {
                                key: "hb_pb",
                                val: function (bidResponse) {
                                    console.log('Bid Response Bid Price: ' + bidResponse.pbMg);
                                    $("#pb").val(bidResponse.pbMg);
                                    return bidResponse.pbMg;
                                }
                            }
                        ]
                    },

                };

            pbjs.que.push(function() {
                pbjs.addAdUnits(adUnits);
                pbjs.requestBids({
                    bidsBackHandler: sendAdserverRequest
                });
            });

            function sendAdserverRequest() {
                if (pbjs.adserverRequestSent) return;
                pbjs.adserverRequestSent = true;
                googletag.cmd.push(function() {
                    pbjs.que.push(function() {
                        pbjs.setTargetingForGPTAsync();
                        console.log("Key Values Appended");
                        googletag.pubads().refresh();
                    });
                });
            }

            setTimeout(function() {
                sendAdserverRequest();
            }, PREBID_TIMEOUT);


          </script>

          <!-- GPT Tag -->

          <script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>

          <script>
              googletag.cmd.push(function() {
                googletag.defineSlot('/27721068/header_bidding', [300, 250], 'div-gpt-ad-1').addService(googletag.pubads());
                googletag.pubads().enableSingleRequest();
                googletag.enableServices();
              });
            </script>


    </head>
    <body>
          <header>
                <div class="container">
                  <nav class="navbar navbar-inverse bg-inverse bg-faded navbar-toggleable-md">
                    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
                      <span class="navbar-toggler-icon"></span>
                    </button>
                    <a class="navbar-brand" href="/">
                      <img src="/resources/images/an.png" width="30" height="30" style="border-radius:15px" class="d-inline-block align-top" alt="">GalacticJohn</a>
                      <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                        <ul class="navbar-nav">
                          <li class="nav-item active">
                            <a class="nav-link" href="http://galacticjohn.com/headerBidding">Header Bidding</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="http://galacticjohn.com/prebidScript">Prebid Script</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="http://galacticjohn.com/fullWidth">Full Width</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="http://galacticjohn.com/xboxTracker">Xbox Tracker</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="http://galacticjohn.com/nativeGallery">Native Gallery</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="http://galacticjohn.com/nativeEditor">Native Editor</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="http://galacticjohn.com/passbackTool">AMP mWeb</a>
                          </li>
                        </ul>
                      </div>
                    </nav>
                  </div>
          </header>

                    <div class="jumbotron container">
                      <div class="form-group row">
                        <label for="bidder" class="prebidLabels col-form-label col-2">Bidder</label>
                        <input id="bidder" readonly type="text" class="form-control col-10">
                      </div>
                      <div class="form-group row">
                        <label for="timeout" class="prebidLabels col-form-label col-2">Timeout</label>
                        <input size="50" id="timeout" readonly type="text" class="form-control col-10">
                      </div>
                      <div class="form-group row">
                        <label for="bidId" class="prebidLabels col-form-label col-2">Bid ID</label>
                        <input size="50" id="bidId" readonly type="text" class="form-control col-10">
                      </div>
                      <div class="form-group row">
                        <label for="adId" class="prebidLabels col-form-label col-2">Ad ID</label>
                        <input size="50" id="adId" readonly type="text" class="form-control col-10">
                      </div>
                      <div class="form-group row">
                        <label for="pb" class="prebidLabels col-form-label col-2">Bid Price</label>
                        <input id="pb" readonly type="text" class="form-control col-10">
                      </div>
                    </div>

                    <div class="jumbotron container">
                        <div class="row">
                          <div class="col">
                          </div>
                          <div class="col-4">
                            <div id='div-gpt-ad-1' style='height:250px; width:300px;'>
                                <script>
                                googletag.cmd.push(function() { googletag.display('div-gpt-ad-1'); });
                                </script>
                            </div>
                          </div>
                          <div class="col">
                          </div>
                        </div>
                    </div>
    </body>
</html>
